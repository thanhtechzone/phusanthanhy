<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ph√≤ng Kh√°m S·∫£n Ph·ª• Khoa Th√†nh √ù - L·ªãch Kh√°m</title>
  <style>
    :root{--bg:#f6f8fa;--card:#ffffff;--text:#0f172a;--muted:#475569;--accent:#0ea5e9;--ok:#10b981;--bad:#ef4444}
    *{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:var(--bg);color:var(--text)}
    header{padding:16px 20px;background:var(--card);position:sticky;top:0;border-bottom:1px solid #e5e7eb}
    h1{margin:0;font-size:20px}
    .container{max-width:1100px;margin:20px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:repeat(7,minmax(0,1fr));gap:12px}
    @media (max-width:1000px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
    @media (max-width:640px){.grid{grid-template-columns:repeat(1,minmax(0,1fr))}}
    .day{background:var(--card);border:1px solid #e5e7eb;border-radius:10px;overflow:hidden;display:flex;flex-direction:column}
    .day h3{margin:0;padding:12px 14px;border-bottom:1px solid #e5e7eb;background:#f9fafb;font-size:16px}
    .slot{padding:12px 14px;border-bottom:1px dashed #e5e7eb;display:grid;grid-template-columns:1fr auto;gap:8px}
    .slot:last-child{border-bottom:none}
    .meta{font-size:13px;color:var(--muted)}
    .title{font-weight:600}
    .badge{padding:2px 8px;border-radius:999px;font-size:12px;align-self:start}
    .available{background:#ecfeff;color:#0369a1;border:1px solid #bae6fd}
    .closed{background:#fff1f2;color:#991b1b;border:1px solid #fecaca}
    footer{color:var(--muted);text-align:center;padding:24px 12px;font-size:13px}
    .note{margin-top:6px;font-size:12px;color:#64748b}
  </style>
  <script>
    const weekdays = ['Ch·ªß nh·∫≠t','Th·ª© 2','Th·ª© 3','Th·ª© 4','Th·ª© 5','Th·ª© 6','Th·ª© 7'];
    async function loadSchedule(){
      const res = await fetch('/api/schedule');
      const data = await res.json();
      const byDay = Array.from({length:7},()=>[]);
      data.forEach(s=>{byDay[s.weekday].push(s)});
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      for(let d=0; d<7; d++){
        const dayEl = document.createElement('div'); dayEl.className='day';
        dayEl.innerHTML = `<h3>${weekdays[d]}</h3>`;
        const slots = byDay[d];
        if(slots.length===0){
          const empty = document.createElement('div');
          empty.className='slot';
          empty.innerHTML = `<div class="meta">Kh√¥ng c√≥ l·ªãch</div>`;
          dayEl.appendChild(empty);
        } else {
          slots.forEach(s=>{
            const slot = document.createElement('div');
            slot.className='slot';
            const badgeCls = s.status==='CLOSED' ? 'badge closed' : 'badge available';
            slot.innerHTML = `
              <div>
                <div class="title">${s.start} - ${s.end} ¬∑ BS. ${s.doctor} ¬∑ Ph√≤ng ${s.room}</div>
                <div class="meta">S·ªë b·ªánh nh√¢n: ${s.capacity}</div>
                ${s.note ? `<div class="note">Ghi ch√∫: ${s.note}</div>` : ''}
              </div>
              <div class="${badgeCls}">${s.status==='CLOSED'?'ƒê√≥ng':'M·ªü'}</div>
            `;
            dayEl.appendChild(slot);
          })
        }
        grid.appendChild(dayEl);
      }
    }
    window.addEventListener('DOMContentLoaded', loadSchedule);
  </script>
  <meta name="description" content="Ph√≤ng Kh√°m S·∫£n Ph·ª• Khoa Th√†nh √ù - L·ªãch kh√°m trong tu·∫ßn" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ü©∫</text></svg>">
 </head>
<body>
  <header>
    <h1>PH√íNG KH√ÅM S·∫¢N PH·ª§ KHOA TH√ÄNH √ù ‚Äî L·ªãch Kh√°m</h1>
  </header>
  <div class="container">
    <div class="grid" id="grid"></div>
  </div>
  <footer>
    ¬© <span id="year"></span> Ph√≤ng Kh√°m S·∫£n Ph·ª• Khoa Th√†nh √ù
  </footer>
  <script>document.getElementById('year').textContent=new Date().getFullYear()</script>
</body>
</html>


